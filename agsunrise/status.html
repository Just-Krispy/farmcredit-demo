<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Application Status â€” Farm Credit SEMO</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f4f7f0;color:#1e3013;min-height:100vh}
    header{background:#52812c;color:white;padding:16px 24px}.logo{font-size:20px;font-weight:700}.logo span{color:#8bc34a}
    .main{max-width:540px;margin:40px auto;padding:0 16px}
    .card{background:white;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,.1);padding:32px}
    .card h2{font-size:20px;font-weight:700;color:#52812c;margin-bottom:8px}
    .card p{color:#666;font-size:14px;margin-bottom:20px}
    input{width:100%;padding:12px 16px;border:2px solid #ddd;border-radius:10px;font-size:16px;outline:none;letter-spacing:1px}
    input:focus{border-color:#52812c}
    button{background:#52812c;color:white;border:none;width:100%;padding:12px;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;margin-top:12px}
    .result{display:none;margin-top:24px;border-top:1px solid #eee;padding-top:20px}
    .badge{display:inline-block;padding:7px 18px;border-radius:20px;font-weight:700;font-size:14px;margin:12px 0}
    .b-submitted{background:#cce5ff;color:#004085}.b-under_review{background:#fff3cd;color:#856404}
    .b-approved{background:#d4edda;color:#155724}.b-declined{background:#f8d7da;color:#721c24}
    .b-more_info{background:#f8d7da;color:#721c24}
    .tl{margin-top:20px}.tl-item{display:flex;gap:12px;margin-bottom:16px}
    .tl-dot{width:12px;height:12px;border-radius:50%;background:#52812c;margin-top:4px;flex-shrink:0}
    .tl-dot.off{background:#ddd}
    .tl-text strong{display:block;font-size:14px}.tl-text span{color:#aaa;font-size:12px}
    .error{color:#ef4444;font-size:14px;margin-top:10px}
    @media (max-width: 768px) {
      .cards, .wrap, .container { max-width: 100%; padding: 0 16px 32px; }
      header h1 { font-size: 26px; }
      .stats-row, .stat-row { gap: 20px; }
    }
  </style>
</head>
<body>
<header><div class="logo">Farm Credit <span>SEMO</span></div></header>
<div class="main">
  <div class="card">
    <h2>ðŸŒ± Application Status</h2>
    <p>Enter your reference number to check your AgSunrise application status.</p>
    <input type="text" id="refIn" placeholder="AS-2025-0000"/>
    <button onclick="check()">Check Status</button>
    <div class="error" id="err"></div>
    <div class="result" id="result">
      <div style="font-size:13px;color:#888">Ref: <strong id="rRef"></strong> Â· Branch: <strong id="rBranch"></strong></div>
      <div class="badge" id="rBadge"></div>
      <div style="font-size:16px;font-weight:600" id="rName"></div>
      <div style="font-size:13px;color:#aaa;margin-top:4px">Submitted: <span id="rDate"></span></div>
      <div class="tl" id="tl"></div>
    </div>
  </div>
</div>
<script>
  const labels={submitted:'âœ… Submitted',under_review:'ðŸ” Under Review',more_info:'ðŸ“‹ More Info Needed',approved:'ðŸŽ‰ Approved!',declined:'âŒ Declined'};
  const classes={submitted:'b-submitted',under_review:'b-under_review',more_info:'b-more_info',approved:'b-approved',declined:'b-declined'};
  const params=new URLSearchParams(window.location.search);
  if(params.get('ref')){document.getElementById('refIn').value=params.get('ref');setTimeout(check,100);}
  function check(){
    const ref=document.getElementById('refIn').value.trim();
    if(!ref)return;
    document.getElementById('err').textContent='';
    const apps=JSON.parse(localStorage.getItem('fc_apps')||'[]');
    const a=apps.find(x=>x.ref_number===ref);
    if(!a){document.getElementById('err').textContent='Application not found. Please check your reference number.';document.getElementById('result').style.display='none';return;}
    document.getElementById('rRef').textContent=a.ref_number;
    document.getElementById('rBranch').textContent=a.branch;
    document.getElementById('rName').textContent=`${a.first_name} ${a.last_name} â€” AgSunrise Application`;
    document.getElementById('rDate').textContent=new Date(a.submitted_at).toLocaleDateString();
    const b=document.getElementById('rBadge');b.textContent=labels[a.status]||a.status;b.className='badge '+(classes[a.status]||'');
    const done=(s)=>['submitted','under_review','more_info','approved','declined'].indexOf(a.status)>=['submitted','under_review','more_info','approved','declined'].indexOf(s);
    document.getElementById('tl').innerHTML=[
      {l:'Application Received',s:'Your application is in our system.',d:true},
      {l:'Under Review',s:'Being reviewed by our lending team (up to 5 business days).',d:['under_review','more_info','approved','declined'].includes(a.status)},
      {l:a.status==='approved'?'ðŸŽ‰ Approved!':a.status==='declined'?'Decision Made':'Final Decision',s:a.status==='approved'?'Congratulations! Your branch will contact you.':a.status==='declined'?'Please contact your branch for details.':'Within 15 business days.',d:['approved','declined'].includes(a.status)}
    ].map(x=>`<div class="tl-item"><div class="tl-dot${x.d?'':' off'}"></div><div class="tl-text"><strong>${x.l}</strong><span>${x.s}</span></div></div>`).join('');
    document.getElementById('result').style.display='block';
  }
</script>
<footer>
<div style="margin-top:32px;padding-top:24px;border-top:1px solid #e5e7eb;display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap">
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#d1fae5,#ecfdf5);border:2px solid #10b981;border-radius:8px;font-size:13px;font-weight:600;color:#065f46">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
      <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </svg>
    <span>WCAG 2.1 AA</span>
  </div>
  
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#dbeafe,#eff6ff);border:2px solid #3b82f6;border-radius:8px;font-size:13px;font-weight:600;color:#1e40af">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
    </svg>
    <span>Keyboard Accessible</span>
  </div>
  
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#fef3c7,#fffbeb);border:2px solid #f59e0b;border-radius:8px;font-size:13px;font-weight:600;color:#92400e">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
      <circle cx="12" cy="12" r="3"></circle>
    </svg>
    <span>Screen Reader Friendly</span>
  </div>
</div>

<p style="text-align:center;margin-top:16px;font-size:11px;color:#9ca3af">
  Built with accessibility in mind Â· Tested with NVDA, VoiceOver, and Lighthouse
</p>

</footer>
</body>
</html>
