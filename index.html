<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farm Credit SEMO ‚Äî Digital Demo Suite</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',system-ui,sans-serif;background:#f4f7f0;min-height:100vh}
    header{background:linear-gradient(135deg,#345220 0%,#52812c 60%,#426824 100%);color:white;padding:48px 24px 40px;text-align:center;position:relative;overflow:hidden}
    header::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}
    header .tag{background:rgba(139,195,74,.2);border:1px solid rgba(139,195,74,.6);display:inline-block;padding:5px 16px;border-radius:20px;font-size:12px;font-weight:700;color:#8bc34a;margin-bottom:16px;letter-spacing:1.5px;text-transform:uppercase;position:relative}
    header h1{font-size:32px;font-weight:900;line-height:1.2;margin-bottom:10px;position:relative}
    header h1 span{color:#8bc34a}
    header p{font-size:15px;opacity:.8;max-width:500px;margin:0 auto 24px;line-height:1.6;position:relative}
    .stats-row{display:flex;justify-content:center;gap:32px;margin-top:4px;flex-wrap:wrap}
    .stat-item{text-align:center}
    .stat-item .val{font-size:22px;font-weight:900;color:white}
    .stat-item .lbl{font-size:11px;color:rgba(255,255,255,.55);margin-top:2px;text-transform:uppercase;letter-spacing:.5px}
    .divider-v{width:1px;background:rgba(255,255,255,.15);align-self:stretch}
    .cards{max-width:660px;margin:28px auto 0;padding:0 16px 48px;display:flex;flex-direction:column;gap:14px}
    a.card{background:white;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.09);padding:22px 24px;text-decoration:none;color:#1e3013;display:block;transition:transform .2s,box-shadow .2s;border-left:5px solid #52812c}
    a.card:hover{transform:translateY(-3px);box-shadow:0 8px 32px rgba(0,0,0,.14)}
    a.card.secondary{border-left-color:#8bc34a}
    a.card.sales{border-left-color:#345220;background:linear-gradient(135deg,#ffffff,#f9fdf6)}
    .card-inner{display:flex;align-items:flex-start;gap:16px}
    .card-icon{font-size:30px;flex-shrink:0;margin-top:2px;width:44px;text-align:center}
    .card h2{font-size:17px;font-weight:700;color:#52812c;margin-bottom:5px}
    a.card.secondary h2{color:#426824}
    a.card.sales h2{color:#345220}
    .card p{font-size:13px;color:#666;line-height:1.6}
    .card .arrow{font-size:18px;color:#8bc34a;margin-left:auto;margin-top:2px;flex-shrink:0}
    .card-badge{display:inline-block;font-size:10px;font-weight:700;letter-spacing:.8px;text-transform:uppercase;padding:2px 8px;border-radius:4px;margin-left:8px;vertical-align:middle}
    .badge-new{background:#fff3cd;color:#856404}
    .badge-live{background:#d4edda;color:#155724}
    .section-label{font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:#aaa;font-weight:600;margin:8px 0 4px 4px}
    footer{text-align:center;padding:24px;font-size:12px;color:#aaa;line-height:1.8}
    
    /* Dark Mode Styles */
    body.dark-mode{background:#0f1419;color:#e4e6eb}
    body.dark-mode header{background:linear-gradient(135deg,#1a2b1a 0%,#2d4a2d 60%,#3a5a3a 100%)}
    body.dark-mode a.card{background:#1a1f2e;color:#e4e6eb;box-shadow:0 4px 20px rgba(0,0,0,.4)}
    body.dark-mode a.card.sales{background:linear-gradient(135deg,#1a1f2e,#1e2833)}
    body.dark-mode a.card:hover{box-shadow:0 8px 32px rgba(0,0,0,.6)}
    body.dark-mode .card h2{color:#8bc34a}
    body.dark-mode a.card.secondary h2{color:#a8d08d}
    body.dark-mode a.card.sales h2{color:#8bc34a}
    body.dark-mode .card p{color:#b0b3b8}
    body.dark-mode .section-label{color:#6b7280}
    body.dark-mode footer{color:#6b7280}
    body.dark-mode #dark-mode-toggle{background:rgba(0,0,0,0.3);border-color:rgba(255,255,255,0.2)}
    
    /* Page Transition */
    body{opacity:0;animation:fadeIn 0.5s ease-in forwards}
    @keyframes fadeIn{to{opacity:1}}
    
    /* Quick Search Modal */
    #quick-search-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:9998;display:none;align-items:flex-start;justify-content:center;padding-top:15vh;backdrop-filter:blur(8px)}
    #quick-search-modal.active{display:flex}
    #quick-search-content{background:white;border-radius:16px;width:90%;max-width:600px;box-shadow:0 20px 60px rgba(0,0,0,0.3);overflow:hidden}
    body.dark-mode #quick-search-content{background:#1a1f2e;border:1px solid #2d3748}
    #quick-search-input{width:100%;padding:20px 24px;border:none;font-size:18px;outline:none;background:transparent;border-bottom:1px solid #e5e7eb}
    body.dark-mode #quick-search-input{color:#e4e6eb;border-bottom-color:#2d3748}
    #quick-search-results{max-height:400px;overflow-y:auto;padding:8px}
    .search-result{padding:12px 16px;cursor:pointer;border-radius:8px;margin:4px 0;transition:background 0.2s}
    .search-result:hover{background:#f3f4f6}
    body.dark-mode .search-result:hover{background:#2d3748}
    .search-result-title{font-weight:600;color:#1e3013;margin-bottom:4px}
    body.dark-mode .search-result-title{color:#e4e6eb}
    .search-result-desc{font-size:13px;color:#666}
    body.dark-mode .search-result-desc{color:#9ca3af}
    
    /* Print Styles */
    @media print{
      body{background:white;color:black}
      header{background:white;color:black;border-bottom:2px solid #52812c}
      .stats-row{color:black}
      a.card{break-inside:avoid;border-left-width:3px}
      #dark-mode-toggle,#quick-search-modal,#fc-chatbot-widget{display:none!important}
    }
  </style>
</head>
<body>
<header>
  <div class="tag">üåæ Live Demo Suite</div>
  <h1>Farm Credit <span>SEMO</span><br/>Digital Experience</h1>
  <p>A purpose-built digital platform for Farm Credit's unique member model ‚Äî patronage, AgSunrise, AI underwriting, and more. Ready in 60 days.</p>
  <div class="stats-row">
    <div class="stat-item"><div class="val" data-target="9000000" data-prefix="$" data-suffix="M">$0</div><div class="lbl">Record Patronage</div></div>
    <div class="divider-v"></div>
    <div class="stat-item"><div class="val" data-target="15" data-suffix="+">0</div><div class="lbl">Live Demos</div></div>
    <div class="divider-v"></div>
    <div class="stat-item"><div class="val" data-target="60" data-suffix=" days">0</div><div class="lbl">To Deploy</div></div>
    <div class="divider-v"></div>
    <div class="stat-item"><div class="val" data-target="65000" data-prefix="$" data-suffix="K">$0</div><div class="lbl">Phase 1 + 2</div></div>
  </div>
  
  <!-- Dark Mode Toggle -->
  <button id="dark-mode-toggle" aria-label="Toggle dark mode" style="position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.15);border:2px solid rgba(255,255,255,0.3);color:white;width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s;backdrop-filter:blur(10px);z-index:100">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </button>
</header>

<div class="cards">

  <div class="section-label">Member-Facing Tools</div>

  <a class="card" href="patronage/index.html">
    <div class="card-inner">
      <div class="card-icon">üí∞</div>
      <div>
        <h2>Patronage Dividend Tracker <span class="card-badge badge-live">Live</span></h2>
        <p>Members see their projected year-end cash refund in real time. Makes your record $9.1M patronage impossible to ignore ‚Äî every single day.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card" href="agsunrise/index.html">
    <div class="card-inner">
      <div class="card-icon">üå±</div>
      <div>
        <h2>AgSunrise Digital Application <span class="card-badge badge-live">Live</span></h2>
        <p>Mobile-first 5-step application for young &amp; beginning farmers. Document upload, real-time status, email updates at every step ‚Äî no PDFs.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card secondary" href="cashflow/index.html">
    <div class="card-inner">
      <div class="card-icon">üìä</div>
      <div>
        <h2>Cash Flow Simulator <span class="card-badge badge-new">New</span></h2>
        <p>Interactive financial modeling tool. Members test different scenarios ‚Äî commodity price swings, loan terms, expense changes. Real-time DSCR calculation.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <div class="section-label">AgSunrise Platform (Full Build)</div>

  <a class="card sales" href="agsunrise-platform/index.html">
    <div class="card-inner">
      <div class="card-icon">üå±</div>
      <div>
        <h2>AgSunrise Platform <span class="card-badge badge-live">Complete</span></h2>
        <p>Full young farmer platform: AI chatbot, mentorship matching, education hub, smart application, and success dashboard. Everything Greg wants in one place.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card secondary" href="youth-programs/index.html">
    <div class="card-inner">
      <div class="card-icon">üéì</div>
      <div>
        <h2>Youth Programs Dashboard <span class="card-badge badge-new">New</span></h2>
        <p>Track scholarship recipients, Three Rivers College partnership, FFA/4-H sponsorships. Real data: 15 students, $17K in scholarships (2024-2025), 12-year classroom commitment.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card" href="agambassadors/index.html">
    <div class="card-inner">
      <div class="card-icon">üåæ</div>
      <div>
        <h2>AgAmbassadors Platform <span class="card-badge badge-new">New</span></h2>
        <p>Complete networking platform for your AgAmbassadors program. Ambassador profiles, alumni directory, event management, farm budget tools, and staff admin dashboard. 68 ambassadors across 5 classes ‚Äî all connected.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card" href="agsunrise/status.html">
    <div class="card-inner">
      <div class="card-icon">üîç</div>
      <div>
        <h2>Application Status Tracker <span class="card-badge badge-live">Live</span></h2>
        <p>Applicants check their status anytime with just a reference number. Full step-by-step timeline.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card" href="health-score.html">
    <div class="card-inner">
      <div class="card-icon">üåæ</div>
      <div>
        <h2>Farm Financial Health Score <span class="card-badge badge-new">New</span></h2>
        <p>Members input basic farm metrics and get a 0-100 financial health score with AI-powered recommendations and SE Missouri benchmarks by crop type.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <div class="section-label">Staff &amp; Operations Tools</div>

  <a class="card sales" href="intelligence.html">
    <div class="card-inner">
      <div class="card-icon">üß†</div>
      <div>
        <h2>Farm Intelligence Dashboard <span class="card-badge badge-new">Phase 2</span></h2>
        <p>AI-powered portfolio risk management. 73/100 health score, 90-day trend charts, at-risk loan cards with default probability forecasting, commodity market intelligence, weekly action digest. 3-12 months early warning before defaults.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card secondary" href="reminders/index.html">
    <div class="card-inner">
      <div class="card-icon">üì®</div>
      <div>
        <h2>Payment Reminder System <span class="card-badge badge-live">Live</span></h2>
        <p>Admin dashboard to manage borrowers. Auto-sends SMS &amp; email reminders 7, 3, and 0 days before each payment ‚Äî with deduplication.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card secondary" href="agsunrise/admin.html">
    <div class="card-inner">
      <div class="card-icon">üóÇÔ∏è</div>
      <div>
        <h2>AgSunrise Staff Admin <span class="card-badge badge-live">Live</span></h2>
        <p>Review applications, update status, add internal notes. Applicants auto-notified by email on every status change.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <div class="section-label">Member Communications</div>

  <a class="card secondary" href="emails/index.html">
    <div class="card-inner">
      <div class="card-icon">‚úâÔ∏è</div>
      <div>
        <h2>Branded Email Templates <span class="card-badge badge-new">New</span></h2>
        <p>5 live examples: loan approval, payment reminders, application receipt, patronage distribution, document requests ‚Äî all auto-sent, all branded to SEMO.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <div class="section-label">Sales Resources</div>

  <a class="card sales" href="roi/index.html">
    <div class="card-inner">
      <div class="card-icon">üìä</div>
      <div>
        <h2>ROI Calculator <span class="card-badge badge-new">New</span></h2>
        <p>Interactive calculator: enter SEMO's loan volume, staff count, and processing time ‚Äî see exact hours saved, dollar return, and payback period on the $25K investment.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card sales" href="compare/index.html">
    <div class="card-inner">
      <div class="card-icon">‚ö°</div>
      <div>
        <h2>FC Platform vs. Alternatives <span class="card-badge badge-new">New</span></h2>
        <p>Side-by-side: FC Platform vs. AgLender, FCS Financial, and building in-house. 22-feature matrix. Why this is the only option that makes sense for SEMO.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card sales" href="phase2/index.html">
    <div class="card-inner">
      <div class="card-icon">üöÄ</div>
      <div>
        <h2>Phase 2 Roadmap <span class="card-badge badge-new">New</span></h2>
        <p>Farm Intelligence map, AI advisor chatbot, portfolio risk analytics, mobile app, core banking sync ‚Äî plus the path to licensing FC Platform to all 55 Farm Credit associations nationally.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

  <a class="card sales" href="proposal/index.html">
    <div class="card-inner">
      <div class="card-icon">üìÑ</div>
      <div>
        <h2>Full Proposal &amp; Pricing</h2>
        <p>Complete one-pager with project descriptions, investment summary, and 60-day delivery timeline. Print-to-PDF ready.</p>
      </div>
      <div class="arrow">‚Üí</div>
    </div>
  </a>

</div>

<footer>
  <div style="max-width:660px;margin:0 auto;padding:0 16px">
    <p style="text-align:center;margin-bottom:24px">
      Farm Credit Southeast Missouri ¬∑ farmcreditsemo.com ¬∑ (877) 730-7327<br/>
      Equal Housing Lender ¬∑ Equal Credit Opportunity ¬∑ Equal Opportunity Provider
    </p>
    
    <div style="margin-top:32px;padding-top:24px;border-top:1px solid #e5e7eb;display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap">
      <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#d1fae5,#ecfdf5);border:2px solid #10b981;border-radius:8px;font-size:13px;font-weight:600;color:#065f46">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <span>WCAG 2.1 AA</span>
      </div>
      
      <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#dbeafe,#eff6ff);border:2px solid #3b82f6;border-radius:8px;font-size:13px;font-weight:600;color:#1e40af">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
        <span>Keyboard Accessible</span>
      </div>
      
      <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#fef3c7,#fffbeb);border:2px solid #f59e0b;border-radius:8px;font-size:13px;font-weight:600;color:#92400e">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        <span>Screen Reader Friendly</span>
      </div>
    </div>
    
    <p style="text-align:center;margin-top:16px;font-size:11px;color:#9ca3af">
      Built with accessibility in mind ¬∑ Tested with NVDA, VoiceOver, and Lighthouse
    </p>
  </div>
</footer>

<!-- MAX ENHANCEMENTS -->
<script>
// MAX ENHANCEMENTS - Farm Credit Demo Suite
// Features: Animated Stats, Dark Mode, Quick Search, Keyboard Shortcuts

(function() {
  'use strict';
  
  // ========== ANIMATED COUNTER ==========
  function animateCounter(element) {
    const target = parseFloat(element.getAttribute('data-target'));
    const prefix = element.getAttribute('data-prefix') || '';
    const suffix = element.getAttribute('data-suffix') || '';
    const duration = 2000; // 2 seconds
    const startTime = Date.now();
    
    function update() {
      const elapsed = Date.now() - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      // Easing function (ease-out)
      const easeOut = 1 - Math.pow(1 - progress, 3);
      const current = Math.floor(target * easeOut);
      
      // Format number
      let displayValue = current.toLocaleString();
      
      // Special formatting
      if (suffix === 'M' || suffix === 'K') {
        const divisor = suffix === 'M' ? 1000000 : 1000;
        displayValue = (current / divisor).toFixed(1);
      }
      
      element.textContent = prefix + displayValue + suffix;
      
      if (progress < 1) {
        requestAnimationFrame(update);
      }
    }
    
    update();
  }
  
  // Animate all counters on page load
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('.stat-item .val[data-target]');
    setTimeout(() => {
      counters.forEach(animateCounter);
    }, 300); // Delay for page fade-in
  });
  
  // ========== DARK MODE ==========
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const savedMode = localStorage.getItem('fc-dark-mode');
  
  // Initialize dark mode
  if (savedMode === 'true' || (!savedMode && prefersDark)) {
    document.body.classList.add('dark-mode');
  }
  
  if (darkModeToggle) {
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      localStorage.setItem('fc-dark-mode', isDark);
      
      // Update icon
      const icon = darkModeToggle.querySelector('svg path');
      if (isDark) {
        icon.setAttribute('d', 'M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z');
      } else {
        icon.setAttribute('d', 'M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z');
      }
    });
  }
  
  // ========== QUICK SEARCH ==========
  const demos = [
    { title: 'Farm Intelligence Dashboard', url: 'intelligence.html', desc: 'AI-powered portfolio risk management' },
    { title: 'Patronage Dividend Tracker', url: 'patronage/index.html', desc: 'Real-time dividend estimates' },
    { title: 'AgSunrise Digital Application', url: 'agsunrise/index.html', desc: 'Young & beginning farmer program' },
    { title: 'AgSunrise Platform', url: 'agsunrise-platform/index.html', desc: 'Complete young farmer platform' },
    { title: 'Cash Flow Simulator', url: 'cashflow/index.html', desc: 'Interactive financial modeling' },
    { title: 'Payment Reminder System', url: 'reminders/index.html', desc: 'Automated SMS & email reminders' },
    { title: 'Application Status Tracker', url: 'agsunrise/status.html', desc: 'Check application status' },
    { title: 'AgSunrise Staff Admin', url: 'agsunrise/admin.html', desc: 'Review applications' },
    { title: 'Farm Financial Health Score', url: 'health-score.html', desc: '0-100 financial health score' },
    { title: 'Branded Email Templates', url: 'emails/index.html', desc: '5 auto-sent email examples' },
    { title: 'ROI Calculator', url: 'roi/index.html', desc: 'Calculate exact ROI' },
    { title: 'Platform Comparison', url: 'compare/index.html', desc: 'vs. AgLender, FCS Financial' },
    { title: 'Phase 2 Roadmap', url: 'phase2/index.html', desc: 'Future expansion features' },
    { title: 'Full Proposal', url: 'proposal/index.html', desc: 'Complete pricing & timeline' }
  ];
  
  // Create search modal
  const searchModal = document.createElement('div');
  searchModal.id = 'quick-search-modal';
  searchModal.setAttribute('role', 'dialog');
  searchModal.setAttribute('aria-label', 'Quick search');
  searchModal.innerHTML = `
    <div id="quick-search-content">
      <input 
        type="text" 
        id="quick-search-input" 
        placeholder="Search demos... (try 'patronage' or 'AI')" 
        aria-label="Search demos"
        autocomplete="off"
      />
      <div id="quick-search-results"></div>
    </div>
  `;
  document.body.appendChild(searchModal);
  
  const searchInput = document.getElementById('quick-search-input');
  const searchResults = document.getElementById('quick-search-results');
  let selectedIndex = -1;
  
  function showSearch() {
    searchModal.classList.add('active');
    searchInput.value = '';
    searchInput.focus();
    showAllResults();
  }
  
  function hideSearch() {
    searchModal.classList.remove('active');
    selectedIndex = -1;
  }
  
  function showAllResults() {
    searchResults.innerHTML = demos.map((demo, idx) => `
      <div class="search-result" data-url="${demo.url}" data-index="${idx}">
        <div class="search-result-title">${demo.title}</div>
        <div class="search-result-desc">${demo.desc}</div>
      </div>
    `).join('');
    
    attachResultClickHandlers();
  }
  
  function search(query) {
    if (!query) {
      showAllResults();
      return;
    }
    
    const filtered = demos.filter(demo => 
      demo.title.toLowerCase().includes(query.toLowerCase()) ||
      demo.desc.toLowerCase().includes(query.toLowerCase())
    );
    
    searchResults.innerHTML = filtered.length > 0 
      ? filtered.map((demo, idx) => `
          <div class="search-result" data-url="${demo.url}" data-index="${idx}">
            <div class="search-result-title">${demo.title}</div>
            <div class="search-result-desc">${demo.desc}</div>
          </div>
        `).join('')
      : '<div style="padding:20px;text-align:center;color:#999">No results found</div>';
    
    attachResultClickHandlers();
  }
  
  function attachResultClickHandlers() {
    document.querySelectorAll('.search-result').forEach(result => {
      result.addEventListener('click', () => {
        window.location.href = result.getAttribute('data-url');
      });
    });
  }
  
  // Search input
  if (searchInput) {
    searchInput.addEventListener('input', (e) => {
      search(e.target.value);
      selectedIndex = -1;
    });
    
    searchInput.addEventListener('keydown', (e) => {
      const results = searchResults.querySelectorAll('.search-result');
      
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        selectedIndex = Math.min(selectedIndex + 1, results.length - 1);
        updateSelection(results);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        selectedIndex = Math.max(selectedIndex - 1, -1);
        updateSelection(results);
      } else if (e.key === 'Enter' && selectedIndex >= 0) {
        e.preventDefault();
        results[selectedIndex].click();
      }
    });
  }
  
  function updateSelection(results) {
    results.forEach((result, idx) => {
      if (idx === selectedIndex) {
        result.style.background = document.body.classList.contains('dark-mode') ? '#2d3748' : '#f3f4f6';
        result.scrollIntoView({ block: 'nearest' });
      } else {
        result.style.background = '';
      }
    });
  }
  
  // Close search on outside click or Escape
  searchModal.addEventListener('click', (e) => {
    if (e.target === searchModal) hideSearch();
  });
  
  // ========== KEYBOARD SHORTCUTS ==========
  document.addEventListener('keydown', (e) => {
    // Cmd/Ctrl + K = Quick Search
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      showSearch();
    }
    
    // Escape = Close search
    if (e.key === 'Escape' && searchModal.classList.contains('active')) {
      hideSearch();
    }
    
    // Cmd/Ctrl + D = Toggle dark mode
    if ((e.metaKey || e.ctrlKey) && e.key === 'd') {
      e.preventDefault();
      if (darkModeToggle) darkModeToggle.click();
    }
  });
  
  // Show keyboard hint on page load (fades out after 3 seconds)
  const showKeyboardHint = () => {
    const hint = document.createElement('div');
    hint.style.cssText = 'position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:12px 20px;border-radius:8px;font-size:14px;z-index:9997;animation:fadeInOut 3s ease-in-out forwards;pointer-events:none';
    hint.innerHTML = 'Press <kbd style="background:rgba(255,255,255,0.2);padding:2px 6px;border-radius:4px;font-family:monospace">‚åòK</kbd> to search';
    document.body.appendChild(hint);
    
    setTimeout(() => hint.remove(), 3000);
  };
  
  // Add fadeInOut animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes fadeInOut {
      0%, 100% { opacity: 0; transform: translateX(-50%) translateY(10px); }
      10%, 90% { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
  `;
  document.head.appendChild(style);
  
  // Show hint after 2 seconds
  setTimeout(showKeyboardHint, 2000);
  
})();
</script>

<!-- Farm Credit AI Assistant Widget - Add before </body> -->
<div id="fc-chatbot-widget">
  <!-- Chat Button -->
  <button id="fc-chat-button" aria-label="Open Farm Credit AI Assistant" style="position:fixed;bottom:24px;right:24px;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#345220,#52812c);border:none;box-shadow:0 4px 16px rgba(82,129,44,0.4);cursor:pointer;z-index:9999;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
  </button>

  <!-- Chat Modal -->
  <div id="fc-chat-modal" role="dialog" aria-labelledby="fc-chat-title" aria-modal="true" style="position:fixed;bottom:100px;right:24px;width:380px;max-width:calc(100vw - 48px);height:550px;max-height:calc(100vh - 150px);background:white;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.2);z-index:10000;display:none;flex-direction:column;overflow:hidden">
    
    <!-- Header -->
    <div style="background:linear-gradient(135deg,#345220,#52812c);color:white;padding:16px 20px;display:flex;align-items:center;justify-content:space-between">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:40px;height:40px;background:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px">ü§ñ</div>
        <div>
          <div id="fc-chat-title" style="font-weight:700;font-size:16px">Farm Credit AI Assistant</div>
          <div style="font-size:12px;opacity:0.9">Online ¬∑ Ready to help</div>
        </div>
      </div>
      <button id="fc-chat-close" aria-label="Close chat" style="background:none;border:none;color:white;font-size:24px;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background 0.2s">√ó</button>
    </div>

    <!-- Messages -->
    <div id="fc-chat-messages" style="flex:1;overflow-y:auto;padding:20px;background:#f9fafb;display:flex;flex-direction:column;gap:12px">
      <!-- Welcome message -->
      <div class="fc-chat-message-bot">
        <div style="background:white;padding:12px 16px;border-radius:12px 12px 12px 4px;box-shadow:0 1px 3px rgba(0,0,0,0.1)">
          <div style="font-size:14px;line-height:1.5">
            üëã Hi! I'm your Farm Credit AI Assistant. I can help you with:<br><br>
            ‚Ä¢ <strong>Patronage</strong> - Check your dividend estimates<br>
            ‚Ä¢ <strong>Loans</strong> - Application status & requirements<br>
            ‚Ä¢ <strong>AgSunrise</strong> - Young farmer programs<br>
            ‚Ä¢ <strong>Account</strong> - General questions<br><br>
            What can I help you with today?
          </div>
        </div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-left:4px">Just now</div>
      </div>
    </div>

    <!-- Input -->
    <div style="padding:16px;background:white;border-top:1px solid #e5e7eb">
      <div style="display:flex;gap:8px">
        <input id="fc-chat-input" type="text" placeholder="Type your message..." aria-label="Chat message" style="flex:1;padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;outline:none" />
        <button id="fc-chat-send" aria-label="Send message" style="background:linear-gradient(135deg,#345220,#52812c);color:white;border:none;width:44px;height:44px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:opacity 0.2s">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
      
      <!-- Quick Actions -->
      <div id="fc-quick-actions" style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
        <button class="fc-quick-btn" data-message="What is my patronage dividend?">üí∞ Patronage</button>
        <button class="fc-quick-btn" data-message="Check my loan application status">üìã Loan Status</button>
        <button class="fc-quick-btn" data-message="Tell me about AgSunrise">üå± AgSunrise</button>
        <button class="fc-quick-btn" data-message="I need help with my account">‚ùì Help</button>
      </div>
    </div>
  </div>
</div>

<style>
/* Chat button hover */
#fc-chat-button:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 24px rgba(82,129,44,0.5);
}

#fc-chat-button:active {
  transform: scale(1.05);
}

#fc-chat-close:hover {
  background: rgba(255,255,255,0.2);
}

/* Quick action buttons */
.fc-quick-btn {
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.fc-quick-btn:hover {
  background: #e5e7eb;
  border-color: #52812c;
}

/* Chat input focus */
#fc-chat-input:focus {
  border-color: #52812c;
  box-shadow: 0 0 0 3px rgba(82,129,44,0.1);
}

/* Scrollbar */
#fc-chat-messages::-webkit-scrollbar {
  width: 6px;
}

#fc-chat-messages::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

#fc-chat-messages::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Message styles */
.fc-chat-message-user {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.fc-chat-message-user > div:first-child {
  background: linear-gradient(135deg,#345220,#52812c);
  color: white;
  padding: 12px 16px;
  border-radius: 12px 12px 4px 12px;
  max-width: 80%;
  font-size: 14px;
  line-height: 1.5;
}

.fc-chat-message-bot {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* Dark Mode Chatbot Styles */
body.dark-mode #fc-chat-modal {
  background: #1a1f2e;
  box-shadow: 0 8px 32px rgba(0,0,0,0.6);
}

body.dark-mode #fc-chat-messages {
  background: #0f1419;
}

body.dark-mode .fc-chat-message-bot > div {
  background: #2d3748 !important;
  color: #e4e6eb;
}

body.dark-mode #fc-chat-input {
  background: #2d3748;
  border-color: #3f4a5f;
  color: #e4e6eb;
}

body.dark-mode #fc-chat-input::placeholder {
  color: #9ca3af;
}

body.dark-mode .fc-quick-btn {
  background: #2d3748;
  border-color: #3f4a5f;
  color: #e4e6eb;
}

body.dark-mode .fc-quick-btn:hover {
  background: #3f4a5f;
  border-color: #52812c;
}

body.dark-mode #fc-chat-messages::-webkit-scrollbar-thumb {
  background: #3f4a5f;
}

body.dark-mode #fc-chat-messages::-webkit-scrollbar-thumb:hover {
  background: #52812c;
}

/* Input area dark mode */
body.dark-mode #fc-chat-modal > div:last-child {
  background: #1a1f2e !important;
  border-top-color: #2d3748 !important;
}

/* Mobile responsive */
@media (max-width: 480px) {
  #fc-chat-button {
    bottom: 16px;
    right: 16px;
    width: 56px;
    height: 56px;
  }
  
  #fc-chat-modal {
    bottom: 88px;
    right: 16px;
    left: 16px;
    width: auto;
    max-width: none;
  }
}

/* Typing indicator */
.fc-typing {
  display: flex;
  gap: 4px;
  padding: 12px 16px;
  background: white;
  border-radius: 12px 12px 12px 4px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  width: fit-content;
}

.fc-typing span {
  width: 8px;
  height: 8px;
  background: #9ca3af;
  border-radius: 50%;
  animation: fc-typing-animation 1.4s infinite;
}

.fc-typing span:nth-child(2) {
  animation-delay: 0.2s;
}

.fc-typing span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes fc-typing-animation {
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-8px);
  }
}
</style>

<script>
(function() {
  // Chat state
  let chatOpen = false;
  
  // DOM elements
  const chatButton = document.getElementById('fc-chat-button');
  const chatModal = document.getElementById('fc-chat-modal');
  const chatClose = document.getElementById('fc-chat-close');
  const chatInput = document.getElementById('fc-chat-input');
  const chatSend = document.getElementById('fc-chat-send');
  const chatMessages = document.getElementById('fc-chat-messages');
  const quickActions = document.querySelectorAll('.fc-quick-btn');
  
  // Demo responses
  const responses = {
    'patronage': 'Your estimated 2024 patronage dividend is <strong>$3,250</strong> based on your current loan balance. This is part of our record <strong>$9.1M distribution</strong>! üí∞',
    'loan': 'Your loan application <strong>#AG2024-0157</strong> is currently in <strong>Underwriting Review</strong>. Expected decision within 5-7 business days. You\'ll receive email/SMS updates. üìã',
    'agsunrise': '<strong>AgSunrise</strong> is our young & beginning farmer program! It includes:<br>‚Ä¢ Reduced interest rates<br>‚Ä¢ Flexible terms<br>‚Ä¢ Mentorship matching<br>‚Ä¢ Free financial education<br><br>Apply at <a href="agsunrise/index.html" style="color:#52812c">farmcreditsemo.com/agsunrise</a> üå±',
    'help': 'I can help with:<br>‚Ä¢ Account questions<br>‚Ä¢ Payment schedules<br>‚Ä¢ Document uploads<br>‚Ä¢ Contact info updates<br><br>Or call us at <strong>(877) 730-7327</strong> for immediate assistance. ‚ùì',
    'default': 'Thanks for your question! For specific account details, please call us at <strong>(877) 730-7327</strong> or email <strong>support@farmcreditsemo.com</strong>. Our team is ready to help! üòä'
  };
  
  // Toggle chat
  function toggleChat() {
    chatOpen = !chatOpen;
    chatModal.style.display = chatOpen ? 'flex' : 'none';
    if (chatOpen) {
      chatInput.focus();
      // Hide quick actions after first open (keep it clean)
      setTimeout(() => {
        const quickActionsContainer = document.getElementById('fc-quick-actions');
        if (quickActionsContainer && chatMessages.children.length > 1) {
          quickActionsContainer.style.display = 'none';
        }
      }, 100);
    }
  }
  
  // Add message
  function addMessage(text, isUser = false) {
    const msgDiv = document.createElement('div');
    msgDiv.className = isUser ? 'fc-chat-message-user' : 'fc-chat-message-bot';
    
    const time = new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
    
    if (isUser) {
      msgDiv.innerHTML = `
        <div>${text}</div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-right:4px">${time}</div>
      `;
    } else {
      msgDiv.innerHTML = `
        <div style="background:white;padding:12px 16px;border-radius:12px 12px 12px 4px;box-shadow:0 1px 3px rgba(0,0,0,0.1)">
          <div style="font-size:14px;line-height:1.5">${text}</div>
        </div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-left:4px">${time}</div>
      `;
    }
    
    chatMessages.appendChild(msgDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
  
  // Show typing indicator
  function showTyping() {
    const typingDiv = document.createElement('div');
    typingDiv.className = 'fc-chat-message-bot';
    typingDiv.id = 'fc-typing-indicator';
    typingDiv.innerHTML = '<div class="fc-typing"><span></span><span></span><span></span></div>';
    chatMessages.appendChild(typingDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
  
  // Remove typing indicator
  function hideTyping() {
    const typingIndicator = document.getElementById('fc-typing-indicator');
    if (typingIndicator) typingIndicator.remove();
  }
  
  // Get response
  function getResponse(message) {
    const msg = message.toLowerCase();
    
    if (msg.includes('patronage') || msg.includes('dividend') || msg.includes('refund')) {
      return responses.patronage;
    } else if (msg.includes('loan') || msg.includes('application') || msg.includes('status')) {
      return responses.loan;
    } else if (msg.includes('agsunrise') || msg.includes('young farmer') || msg.includes('beginning')) {
      return responses.agsunrise;
    } else if (msg.includes('help') || msg.includes('support') || msg.includes('account')) {
      return responses.help;
    } else {
      return responses.default;
    }
  }
  
  // Send message
  function sendMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    // Add user message
    addMessage(message, true);
    chatInput.value = '';
    
    // Show typing
    showTyping();
    
    // Simulate AI response delay
    setTimeout(() => {
      hideTyping();
      const response = getResponse(message);
      addMessage(response);
    }, 800 + Math.random() * 400); // 800-1200ms delay
  }
  
  // Event listeners
  chatButton.addEventListener('click', toggleChat);
  chatClose.addEventListener('click', toggleChat);
  chatSend.addEventListener('click', sendMessage);
  
  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      sendMessage();
    }
  });
  
  quickActions.forEach(btn => {
    btn.addEventListener('click', () => {
      const message = btn.getAttribute('data-message');
      chatInput.value = message;
      sendMessage();
    });
  });
  
  // Close on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && chatOpen) {
      toggleChat();
    }
  });
  
  // Close modal when clicking outside
  chatModal.addEventListener('click', (e) => {
    if (e.target === chatModal) {
      toggleChat();
    }
  });
})();
</script>

</body>
</html>
