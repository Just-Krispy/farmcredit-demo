<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farm Credit SEMO ‚Äî Digital Demo</title>
</head>
<body style="margin:0;padding:0;background-color:#f4f7f0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;">

  <table width="100%" cellpadding="0" cellspacing="0" style="background:#f4f7f0;padding:32px 0;">
    <tr><td align="center">
      <table width="600" cellpadding="0" cellspacing="0" style="max-width:600px;width:100%;">

        <!-- HEADER -->
        <tr>
          <td style="background:#52812c;border-radius:16px 16px 0 0;padding:32px 40px;text-align:center;">
            <p style="margin:0 0 4px;font-size:13px;color:#8bc34a;letter-spacing:2px;text-transform:uppercase;font-weight:600;">Farm Credit Southeast Missouri</p>
            <h1 style="margin:0;font-size:28px;font-weight:800;color:#ffffff;line-height:1.2;">A Few Ideas I Built<br/>For the Business</h1>
            <p style="margin:12px 0 0;font-size:15px;color:rgba(255,255,255,0.75);">Three working tools ‚Äî ready to demo right now.</p>
          </td>
        </tr>

        <!-- INTRO -->
        <tr>
          <td style="background:#ffffff;padding:36px 40px 28px;">
            <p style="margin:0 0 16px;font-size:16px;line-height:1.7;color:#1e3013;">Hey Dad,</p>
            <p style="margin:0 0 16px;font-size:16px;line-height:1.7;color:#444;">You just hit a <strong style="color:#52812c;">record $9.1 million patronage refund</strong> ‚Äî the biggest in Farm Credit SEMO's history. That's an incredible achievement and a real differentiator from every bank in your territory.</p>
            <p style="margin:0 0 16px;font-size:16px;line-height:1.7;color:#444;">But here's what I keep thinking: how many of your members actually <em>feel</em> that advantage before their check arrives? How many young farmers even know about AgSunrise because they can't find a simple online application?</p>
            <p style="margin:0;font-size:16px;line-height:1.7;color:#444;">I spent some time this week and built three tools to address exactly that. They're all live and working right now. Take a look:</p>
          </td>
        </tr>

        <!-- DIVIDER -->
        <tr><td style="background:#ffffff;padding:0 40px;"><hr style="border:none;border-top:1px solid #eee;margin:0;"/></td></tr>

        <!-- TOOL 1: PATRONAGE TRACKER -->
        <tr>
          <td style="background:#ffffff;padding:28px 40px;">
            <table width="100%" cellpadding="0" cellspacing="0">
              <tr>
                <td style="width:52px;vertical-align:top;">
                  <div style="width:48px;height:48px;background:#f2f7ed;border-radius:12px;text-align:center;line-height:48px;font-size:24px;">üí∞</div>
                </td>
                <td style="padding-left:16px;vertical-align:top;">
                  <h2 style="margin:0 0 6px;font-size:18px;font-weight:700;color:#52812c;">Live Patronage Dividend Tracker</h2>
                  <p style="margin:0 0 14px;font-size:14px;line-height:1.6;color:#555;">Every SEMO member can see their projected year-end cash refund in real time ‚Äî just by entering their loan balance. It makes your patronage program visible and tangible every single day, not just once a year.</p>
                  <a href="../patronage/index.html" style="display:inline-block;background:#52812c;color:#ffffff;text-decoration:none;padding:10px 22px;border-radius:8px;font-size:14px;font-weight:600;">View Demo ‚Üí</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <tr><td style="background:#ffffff;padding:0 40px;"><hr style="border:none;border-top:1px solid #eee;margin:0;"/></td></tr>

        <!-- TOOL 2: PAYMENT REMINDERS -->
        <tr>
          <td style="background:#ffffff;padding:28px 40px;">
            <table width="100%" cellpadding="0" cellspacing="0">
              <tr>
                <td style="width:52px;vertical-align:top;">
                  <div style="width:48px;height:48px;background:#f2f7ed;border-radius:12px;text-align:center;line-height:48px;font-size:24px;">üì®</div>
                </td>
                <td style="padding-left:16px;vertical-align:top;">
                  <h2 style="margin:0 0 6px;font-size:18px;font-weight:700;color:#52812c;">Automated Payment Reminder System</h2>
                  <p style="margin:0 0 14px;font-size:14px;line-height:1.6;color:#555;">Automatically texts and emails borrowers 7 days, 3 days, and the day of their loan payment. Reduces late payments, saves staff time on reminder calls, and creates a positive touchpoint that shows SEMO is looking out for members.</p>
                  <a href="../reminders/index.html" style="display:inline-block;background:#52812c;color:#ffffff;text-decoration:none;padding:10px 22px;border-radius:8px;font-size:14px;font-weight:600;">View Demo ‚Üí</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <tr><td style="background:#ffffff;padding:0 40px;"><hr style="border:none;border-top:1px solid #eee;margin:0;"/></td></tr>

        <!-- TOOL 3: AGSUNRISE APP -->
        <tr>
          <td style="background:#ffffff;padding:28px 40px;">
            <table width="100%" cellpadding="0" cellspacing="0">
              <tr>
                <td style="width:52px;vertical-align:top;">
                  <div style="width:48px;height:48px;background:#f2f7ed;border-radius:12px;text-align:center;line-height:48px;font-size:24px;">üå±</div>
                </td>
                <td style="padding-left:16px;vertical-align:top;">
                  <h2 style="margin:0 0 6px;font-size:18px;font-weight:700;color:#52812c;">AgSunrise Digital Application</h2>
                  <p style="margin:0 0 14px;font-size:14px;line-height:1.6;color:#555;">A mobile-friendly, 5-step online application for the AgSunrise young farmer program ‚Äî replacing the current PDF process. Applicants upload documents from their phone, track their status online, and get email updates at every step. Staff get a full review dashboard.</p>
                  <table cellpadding="0" cellspacing="0"><tr>
                    <td style="padding-right:10px;"><a href="../agsunrise/index.html" style="display:inline-block;background:#52812c;color:#ffffff;text-decoration:none;padding:10px 22px;border-radius:8px;font-size:14px;font-weight:600;">Applicant View ‚Üí</a></td>
                    <td><a href="../agsunrise/admin.html" style="display:inline-block;background:#f2f7ed;color:#52812c;text-decoration:none;padding:10px 22px;border-radius:8px;font-size:14px;font-weight:600;border:1.5px solid #c4dab8;">Staff Admin ‚Üí</a></td>
                  </tr></table>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- START HERE BOX -->
        <tr>
          <td style="background:#52812c;padding:28px 40px;text-align:center;">
            <p style="margin:0 0 6px;font-size:13px;color:#8bc34a;letter-spacing:1px;text-transform:uppercase;font-weight:600;">Not sure where to start?</p>
            <p style="margin:0 0 16px;font-size:15px;color:rgba(255,255,255,0.85);">The home page has all four tools in one place.</p>
            <a href="../index.html" style="display:inline-block;background:#8bc34a;color:#1e3013;text-decoration:none;padding:14px 32px;border-radius:10px;font-size:16px;font-weight:800;">Open the Demo Suite ‚Üí</a>
          </td>
        </tr>

        <!-- PRICING -->
        <tr>
          <td style="background:#ffffff;padding:32px 40px;">
            <h2 style="margin:0 0 16px;font-size:18px;font-weight:700;color:#52812c;text-align:center;">Investment</h2>
            <table width="100%" cellpadding="0" cellspacing="0" style="border:1px solid #eee;border-radius:10px;overflow:hidden;">
              <tr style="background:#f4f7f0;">
                <th style="text-align:left;padding:10px 16px;font-size:12px;text-transform:uppercase;color:#888;font-weight:600;letter-spacing:.5px;">Project</th>
                <th style="text-align:right;padding:10px 16px;font-size:12px;text-transform:uppercase;color:#888;font-weight:600;letter-spacing:.5px;">Investment</th>
              </tr>
              <tr><td style="padding:14px 16px;font-size:15px;color:#1e3013;border-top:1px solid #f0f0f0;">üí∞ Patronage Dividend Tracker</td><td style="padding:14px 16px;font-size:15px;text-align:right;font-weight:600;color:#52812c;border-top:1px solid #f0f0f0;">$12,000</td></tr>
              <tr><td style="padding:14px 16px;font-size:15px;color:#1e3013;border-top:1px solid #f0f0f0;">üì® Automated Payment Reminders</td><td style="padding:14px 16px;font-size:15px;text-align:right;font-weight:600;color:#52812c;border-top:1px solid #f0f0f0;">$5,000</td></tr>
              <tr><td style="padding:14px 16px;font-size:15px;color:#1e3013;border-top:1px solid #f0f0f0;">üå± AgSunrise Digital Application</td><td style="padding:14px 16px;font-size:15px;text-align:right;font-weight:600;color:#52812c;border-top:1px solid #f0f0f0;">$8,000</td></tr>
              <tr style="background:#f2f7ed;">
                <td style="padding:14px 16px;font-size:16px;font-weight:800;color:#1e3013;border-top:2px solid #c4dab8;">Total ‚Äî All Three Projects</td>
                <td style="padding:14px 16px;font-size:20px;font-weight:800;text-align:right;color:#52812c;border-top:2px solid #c4dab8;">$25,000</td>
              </tr>
            </table>
            <p style="margin:12px 0 0;font-size:13px;color:#aaa;text-align:center;">50% to start ¬∑ 50% on delivery ¬∑ 60-day timeline ¬∑ Optional $400/mo maintenance</p>
          </td>
        </tr>

        <!-- CLOSING -->
        <tr>
          <td style="background:#ffffff;padding:0 40px 36px;border-radius:0 0 16px 16px;">
            <hr style="border:none;border-top:1px solid #eee;margin:0 0 24px;"/>
            <p style="margin:0 0 12px;font-size:15px;line-height:1.7;color:#444;">These are all working right now ‚Äî no mockups, no wireframes. I built the real thing so you could see exactly what your members and staff would experience.</p>
            <p style="margin:0 0 12px;font-size:15px;line-height:1.7;color:#444;">If any of these feel useful, I'd love to jump on a call and walk through them together. And if you have something you've been wanting to build but haven't been able to get prioritized ‚Äî I want to hear about it.</p>
            <p style="margin:0;font-size:15px;line-height:1.7;color:#444;">Love you Dad. Proud of everything you've built.</p>
            <p style="margin:16px 0 0;font-size:15px;font-weight:700;color:#52812c;">‚Äî Krispy</p>
          </td>
        </tr>

        <!-- FOOTER -->
        <tr>
          <td style="padding:20px 40px;text-align:center;">
            <p style="margin:0;font-size:12px;color:#aaa;line-height:1.6;">
              Farm Credit Southeast Missouri ¬∑ <a href="https://farmcreditsemo.com" style="color:#aaa;">farmcreditsemo.com</a><br/>
              (877) 730-7327 ¬∑ Sikeston, MO<br/>
              Equal Housing Lender ¬∑ Equal Credit Opportunity ¬∑ Equal Opportunity Provider
            </p>
          </td>
        </tr>

      </table>
    </td></tr>
  </table>

<footer>
<div style="margin-top:32px;padding-top:24px;border-top:1px solid #e5e7eb;display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap">
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#d1fae5,#ecfdf5);border:2px solid #10b981;border-radius:8px;font-size:13px;font-weight:600;color:#065f46">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
      <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </svg>
    <span>WCAG 2.1 AA</span>
  </div>
  
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#dbeafe,#eff6ff);border:2px solid #3b82f6;border-radius:8px;font-size:13px;font-weight:600;color:#1e40af">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
    </svg>
    <span>Keyboard Accessible</span>
  </div>
  
  <div style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#fef3c7,#fffbeb);border:2px solid #f59e0b;border-radius:8px;font-size:13px;font-weight:600;color:#92400e">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
      <circle cx="12" cy="12" r="3"></circle>
    </svg>
    <span>Screen Reader Friendly</span>
  </div>
</div>

<p style="text-align:center;margin-top:16px;font-size:11px;color:#9ca3af">
  Built with accessibility in mind ¬∑ Tested with NVDA, VoiceOver, and Lighthouse
</p>

</footer>
<!-- Farm Credit AI Assistant Widget - Add before </body> -->
<div id="fc-chatbot-widget">
  <!-- Chat Button -->
  <button id="fc-chat-button" aria-label="Open Farm Credit AI Assistant" style="position:fixed;bottom:24px;right:24px;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#345220,#52812c);border:none;box-shadow:0 4px 16px rgba(82,129,44,0.4);cursor:pointer;z-index:9999;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
  </button>

  <!-- Chat Modal -->
  <div id="fc-chat-modal" role="dialog" aria-labelledby="fc-chat-title" aria-modal="true" style="position:fixed;bottom:100px;right:24px;width:380px;max-width:calc(100vw - 48px);height:550px;max-height:calc(100vh - 150px);background:white;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.2);z-index:10000;display:none;flex-direction:column;overflow:hidden">
    
    <!-- Header -->
    <div style="background:linear-gradient(135deg,#345220,#52812c);color:white;padding:16px 20px;display:flex;align-items:center;justify-content:space-between">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:40px;height:40px;background:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px">ü§ñ</div>
        <div>
          <div id="fc-chat-title" style="font-weight:700;font-size:16px">Farm Credit AI Assistant</div>
          <div style="font-size:12px;opacity:0.9">Online ¬∑ Ready to help</div>
        </div>
      </div>
      <button id="fc-chat-close" aria-label="Close chat" style="background:none;border:none;color:white;font-size:24px;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background 0.2s">√ó</button>
    </div>

    <!-- Messages -->
    <div id="fc-chat-messages" style="flex:1;overflow-y:auto;padding:20px;background:#f9fafb;display:flex;flex-direction:column;gap:12px">
      <!-- Welcome message -->
      <div class="fc-chat-message-bot">
        <div style="background:white;padding:12px 16px;border-radius:12px 12px 12px 4px;box-shadow:0 1px 3px rgba(0,0,0,0.1)">
          <div style="font-size:14px;line-height:1.5">
            üëã Hi! I'm your Farm Credit AI Assistant. I can help you with:<br><br>
            ‚Ä¢ <strong>Patronage</strong> - Check your dividend estimates<br>
            ‚Ä¢ <strong>Loans</strong> - Application status & requirements<br>
            ‚Ä¢ <strong>AgSunrise</strong> - Young farmer programs<br>
            ‚Ä¢ <strong>Account</strong> - General questions<br><br>
            What can I help you with today?
          </div>
        </div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-left:4px">Just now</div>
      </div>
    </div>

    <!-- Input -->
    <div style="padding:16px;background:white;border-top:1px solid #e5e7eb">
      <div style="display:flex;gap:8px">
        <input id="fc-chat-input" type="text" placeholder="Type your message..." aria-label="Chat message" style="flex:1;padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;outline:none" />
        <button id="fc-chat-send" aria-label="Send message" style="background:linear-gradient(135deg,#345220,#52812c);color:white;border:none;width:44px;height:44px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:opacity 0.2s">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
      
      <!-- Quick Actions -->
      <div id="fc-quick-actions" style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
        <button class="fc-quick-btn" data-message="What is my patronage dividend?">üí∞ Patronage</button>
        <button class="fc-quick-btn" data-message="Check my loan application status">üìã Loan Status</button>
        <button class="fc-quick-btn" data-message="Tell me about AgSunrise">üå± AgSunrise</button>
        <button class="fc-quick-btn" data-message="I need help with my account">‚ùì Help</button>
      </div>
    </div>
  </div>
</div>

<style>
/* Chat button hover */
#fc-chat-button:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 24px rgba(82,129,44,0.5);
}

#fc-chat-button:active {
  transform: scale(1.05);
}

#fc-chat-close:hover {
  background: rgba(255,255,255,0.2);
}

/* Quick action buttons */
.fc-quick-btn {
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.fc-quick-btn:hover {
  background: #e5e7eb;
  border-color: #52812c;
}

/* Chat input focus */
#fc-chat-input:focus {
  border-color: #52812c;
  box-shadow: 0 0 0 3px rgba(82,129,44,0.1);
}

/* Scrollbar */
#fc-chat-messages::-webkit-scrollbar {
  width: 6px;
}

#fc-chat-messages::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

#fc-chat-messages::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Message styles */
.fc-chat-message-user {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.fc-chat-message-user > div:first-child {
  background: linear-gradient(135deg,#345220,#52812c);
  color: white;
  padding: 12px 16px;
  border-radius: 12px 12px 4px 12px;
  max-width: 80%;
  font-size: 14px;
  line-height: 1.5;
}

.fc-chat-message-bot {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* Mobile responsive */
@media (max-width: 480px) {
  #fc-chat-button {
    bottom: 16px;
    right: 16px;
    width: 56px;
    height: 56px;
  }
  
  #fc-chat-modal {
    bottom: 88px;
    right: 16px;
    left: 16px;
    width: auto;
    max-width: none;
  }
}

/* Typing indicator */
.fc-typing {
  display: flex;
  gap: 4px;
  padding: 12px 16px;
  background: white;
  border-radius: 12px 12px 12px 4px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  width: fit-content;
}

.fc-typing span {
  width: 8px;
  height: 8px;
  background: #9ca3af;
  border-radius: 50%;
  animation: fc-typing-animation 1.4s infinite;
}

.fc-typing span:nth-child(2) {
  animation-delay: 0.2s;
}

.fc-typing span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes fc-typing-animation {
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-8px);
  }
}
</style>

<script>
(function() {
  // Chat state
  let chatOpen = false;
  
  // DOM elements
  const chatButton = document.getElementById('fc-chat-button');
  const chatModal = document.getElementById('fc-chat-modal');
  const chatClose = document.getElementById('fc-chat-close');
  const chatInput = document.getElementById('fc-chat-input');
  const chatSend = document.getElementById('fc-chat-send');
  const chatMessages = document.getElementById('fc-chat-messages');
  const quickActions = document.querySelectorAll('.fc-quick-btn');
  
  // Demo responses
  const responses = {
    'patronage': 'Your estimated 2024 patronage dividend is <strong>$3,250</strong> based on your current loan balance. This is part of our record <strong>$9.1M distribution</strong>! üí∞',
    'loan': 'Your loan application <strong>#AG2024-0157</strong> is currently in <strong>Underwriting Review</strong>. Expected decision within 5-7 business days. You\'ll receive email/SMS updates. üìã',
    'agsunrise': '<strong>AgSunrise</strong> is our young & beginning farmer program! It includes:<br>‚Ä¢ Reduced interest rates<br>‚Ä¢ Flexible terms<br>‚Ä¢ Mentorship matching<br>‚Ä¢ Free financial education<br><br>Apply at <a href="agsunrise/index.html" style="color:#52812c">farmcreditsemo.com/agsunrise</a> üå±',
    'help': 'I can help with:<br>‚Ä¢ Account questions<br>‚Ä¢ Payment schedules<br>‚Ä¢ Document uploads<br>‚Ä¢ Contact info updates<br><br>Or call us at <strong>(877) 730-7327</strong> for immediate assistance. ‚ùì',
    'default': 'Thanks for your question! For specific account details, please call us at <strong>(877) 730-7327</strong> or email <strong>support@farmcreditsemo.com</strong>. Our team is ready to help! üòä'
  };
  
  // Toggle chat
  function toggleChat() {
    chatOpen = !chatOpen;
    chatModal.style.display = chatOpen ? 'flex' : 'none';
    if (chatOpen) {
      chatInput.focus();
      // Hide quick actions after first open (keep it clean)
      setTimeout(() => {
        const quickActionsContainer = document.getElementById('fc-quick-actions');
        if (quickActionsContainer && chatMessages.children.length > 1) {
          quickActionsContainer.style.display = 'none';
        }
      }, 100);
    }
  }
  
  // Add message
  function addMessage(text, isUser = false) {
    const msgDiv = document.createElement('div');
    msgDiv.className = isUser ? 'fc-chat-message-user' : 'fc-chat-message-bot';
    
    const time = new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
    
    if (isUser) {
      msgDiv.innerHTML = `
        <div>${text}</div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-right:4px">${time}</div>
      `;
    } else {
      msgDiv.innerHTML = `
        <div style="background:white;padding:12px 16px;border-radius:12px 12px 12px 4px;box-shadow:0 1px 3px rgba(0,0,0,0.1)">
          <div style="font-size:14px;line-height:1.5">${text}</div>
        </div>
        <div style="font-size:11px;color:#9ca3af;margin-top:4px;padding-left:4px">${time}</div>
      `;
    }
    
    chatMessages.appendChild(msgDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
  
  // Show typing indicator
  function showTyping() {
    const typingDiv = document.createElement('div');
    typingDiv.className = 'fc-chat-message-bot';
    typingDiv.id = 'fc-typing-indicator';
    typingDiv.innerHTML = '<div class="fc-typing"><span></span><span></span><span></span></div>';
    chatMessages.appendChild(typingDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
  
  // Remove typing indicator
  function hideTyping() {
    const typingIndicator = document.getElementById('fc-typing-indicator');
    if (typingIndicator) typingIndicator.remove();
  }
  
  // Get response
  function getResponse(message) {
    const msg = message.toLowerCase();
    
    if (msg.includes('patronage') || msg.includes('dividend') || msg.includes('refund')) {
      return responses.patronage;
    } else if (msg.includes('loan') || msg.includes('application') || msg.includes('status')) {
      return responses.loan;
    } else if (msg.includes('agsunrise') || msg.includes('young farmer') || msg.includes('beginning')) {
      return responses.agsunrise;
    } else if (msg.includes('help') || msg.includes('support') || msg.includes('account')) {
      return responses.help;
    } else {
      return responses.default;
    }
  }
  
  // Send message
  function sendMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    // Add user message
    addMessage(message, true);
    chatInput.value = '';
    
    // Show typing
    showTyping();
    
    // Simulate AI response delay
    setTimeout(() => {
      hideTyping();
      const response = getResponse(message);
      addMessage(response);
    }, 800 + Math.random() * 400); // 800-1200ms delay
  }
  
  // Event listeners
  chatButton.addEventListener('click', toggleChat);
  chatClose.addEventListener('click', toggleChat);
  chatSend.addEventListener('click', sendMessage);
  
  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      sendMessage();
    }
  });
  
  quickActions.forEach(btn => {
    btn.addEventListener('click', () => {
      const message = btn.getAttribute('data-message');
      chatInput.value = message;
      sendMessage();
    });
  });
  
  // Close on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && chatOpen) {
      toggleChat();
    }
  });
  
  // Close modal when clicking outside
  chatModal.addEventListener('click', (e) => {
    if (e.target === chatModal) {
      toggleChat();
    }
  });
})();
</script>

</body>
</html>
